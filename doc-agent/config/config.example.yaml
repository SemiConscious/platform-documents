# Platform Documentation Agent Configuration

llm:
  provider: anthropic
  model: claude-sonnet-4-20250514
  max_tokens: 4096
  temperature: 0.3

mcp:
  # Natterbox MCP server configuration
  server: natterbox
  timeout: 60
  
  # How to launch the MCP server (if not already running)
  # These can also be set via environment variables:
  # MCP_SERVER_COMMAND, MCP_SERVER_ARGS
  command: npx
  args:
    - "@natterbox/mcp-server"
  
  # Additional environment variables for the server
  # Tokens are automatically added from OAuth if configured
  # env:
  #   GITHUB_TOKEN: "your-token"
  #   CONFLUENCE_TOKEN: "your-token"
  #   JIRA_TOKEN: "your-token"

# Authentication configuration
auth:
  # Token cache directory (default: ~/.doc-agent/tokens)
  # cache_dir: ~/.doc-agent/tokens
  
  # GitHub OAuth (for API access via MCP)
  github:
    enabled: true
    # Get these from GitHub Settings > Developer settings > OAuth Apps
    client_id: "your-github-oauth-client-id"
    # client_secret: "your-github-oauth-client-secret"  # Optional for public clients
    scopes:
      - repo
      - read:org
      - read:user
  
  # Atlassian OAuth (for Confluence & Jira via MCP)
  atlassian:
    enabled: true
    # Get these from https://developer.atlassian.com/console/myapps/
    client_id: "your-atlassian-oauth-client-id"
    client_secret: "your-atlassian-oauth-client-secret"
    scopes:
      - read:jira-work
      - read:jira-user
      - read:confluence-content.all
      - read:confluence-space.summary
      - offline_access
  
  # AWS SSO (for Bedrock API)
  aws:
    enabled: true
    profile: "your-sso-profile"  # AWS profile with SSO configured
    region: us-east-1
    use_aws_vault: true  # Use aws-vault for credential management

sources:
  github:
    organizations:
      - natterbox
    exclude_repos:
      - ".*-deprecated"
      - ".*-archive"
      - "internal-tools"
    include_patterns:
      - "README.md"
      - "docs/**/*.md"
      - "*.yaml"
      - "*.yml"
      - "openapi*.json"
      - "openapi*.yaml"
      - "swagger*.json"
      - "swagger*.yaml"
      - "**/migrations/**"
      - "**/schema*.sql"
      - "package.json"
      - "requirements.txt"
      - "go.mod"
      - "Cargo.toml"
      - "pom.xml"
      
  confluence:
    spaces:
      - ARCH
      - ENG
      - OPS
      - PLAT
    exclude_labels:
      - draft
      - deprecated
      
  jira:
    projects:
      - PLAT
      - VOICE
      - INT
      - INFRA
    issue_types:
      - Epic
      - Story
      - Bug
      - "Technical Debt"

output:
  directory: ./docs
  format: markdown
  
agents:
  discovery:
    parallelism: 5
    timeout: 300
  analysis:
    parallelism: 3
    timeout: 600
  generation:
    parallelism: 10
    timeout: 120
  quality:
    parallelism: 5
    timeout: 60

quality:
  min_completeness: 0.8
  require_review: false
  validate_links: true
  
logging:
  level: INFO
  file: ./logs/doc-agent.log
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
