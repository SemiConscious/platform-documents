# Platform Documentation Agent Configuration

llm:
  # Using AWS Bedrock for Claude API access
  provider: bedrock
  model: anthropic.claude-sonnet-4-20250514-v1:0  # Claude Opus 4.5 on Bedrock
  max_tokens: 4096
  temperature: 0.3

mcp:
  # Natterbox MCP server (SSE transport with built-in OAuth)
  url: "https://avatar.natterbox-dev03.net/mcp/sse"
  transport: sse
  timeout: 60
  
  # OAuth configuration (MCP server handles GitHub/Confluence/Jira auth)
  oauth:
    authorization_url: "https://avatar.natterbox-dev03.net/mcp/authorize"
    token_url: "https://avatar.natterbox-dev03.net/mcp/token"
    client_id: "doc-agent"
    scopes: []

# Authentication configuration
auth:
  # Token cache directory (default: ~/.doc-agent/tokens)
  # cache_dir: ~/.doc-agent/tokens
  
  # AWS SSO (for Bedrock API)
  aws:
    enabled: true
    profile: "ssh-dev03-admin"  # AWS profile with SSO configured
    region: us-east-1
    use_aws_vault: true  # Use aws-vault for credential management

sources:
  github:
    organizations:
      - natterbox
    exclude_repos:
      - ".*-deprecated"
      - ".*-archive"
      - "internal-tools"
    include_patterns:
      - "README.md"
      - "docs/**/*.md"
      - "*.yaml"
      - "*.yml"
      - "openapi*.json"
      - "openapi*.yaml"
      - "swagger*.json"
      - "swagger*.yaml"
      - "**/migrations/**"
      - "**/schema*.sql"
      - "package.json"
      - "requirements.txt"
      - "go.mod"
      - "Cargo.toml"
      - "pom.xml"
      
  confluence:
    spaces:
      - ARCH
      - ENG
      - OPS
      - PLAT
    exclude_labels:
      - draft
      - deprecated
      
  jira:
    projects:
      - PLAT
      - VOICE
      - INT
      - INFRA
    issue_types:
      - Epic
      - Story
      - Bug
      - "Technical Debt"

output:
  directory: ./docs
  format: markdown
  
agents:
  discovery:
    parallelism: 5
    timeout: 300
  analysis:
    parallelism: 3
    timeout: 600
  generation:
    parallelism: 10
    timeout: 120
  quality:
    parallelism: 5
    timeout: 60

quality:
  min_completeness: 0.8
  require_review: false
  validate_links: true
  
logging:
  level: INFO
  file: ./logs/doc-agent.log
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
